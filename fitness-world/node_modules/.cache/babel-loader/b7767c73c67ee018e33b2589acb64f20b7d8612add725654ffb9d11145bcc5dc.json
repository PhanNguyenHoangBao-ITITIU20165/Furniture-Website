{"ast":null,"code":"import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { backendURL } from 'src/constant/api/backendURL';\nimport Cookies from 'js-cookie';\nimport { signInAPI, signUpAPI } from 'src/constant/api/authentication';\nimport { getUserInfoAPI, updateUserInfoAPI } from 'src/constant/api/userAPI';\nexport const getUserInfo = createAsyncThunk('auth/getUserInfo', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const token = Cookies.get('accessToken');\n    const response = await getUserInfoAPI(token);\n    return response.data;\n  } catch (err) {\n    return rejectWithValue(err.message);\n  }\n});\nexport const updateUserInfo = createAsyncThunk('auth/updateUserInfo', async (userUpdateInfo, {\n  rejectWithValue\n}) => {\n  try {\n    const token = Cookies.get('accessToken');\n    const response = await updateUserInfoAPI(token, userUpdateInfo);\n    return response;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const userSignIn = createAsyncThunk('auth/signin', async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await signInAPI(userData);\n    Cookies.set('accessToken', data.cookie, {\n      expires: 7\n    });\n    const {\n      role,\n      ...userDataTemp\n    } = data.validUser;\n    const finalData = {\n      role: data.validUser.role,\n      validUser: userDataTemp,\n      accessToken: data.cookie\n    };\n    return finalData;\n  } catch (err) {\n    if (err.response && err.response.message) {\n      return rejectWithValue(err.response.message);\n    } else {\n      return rejectWithValue(err.message);\n    }\n  }\n});\nexport const userSignUp = createAsyncThunk('auth/signup', async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await signUpAPI(userData);\n    Cookies.set('accessToken', data.cookie, {\n      expires: 7\n    });\n    const {\n      role,\n      ...userDataTemp\n    } = data.newUser;\n    const finalData = {\n      role: data.newUser.role,\n      newUser: userDataTemp,\n      accessToken: data.cookie\n    };\n    console.log(finalData);\n    return finalData;\n  } catch (error) {\n    if (error.response && error.response.message) return rejectWithValue(error.response.message);else return rejectWithValue(error.response);\n  }\n});\nexport const userSignOut = createAsyncThunk('auth/signout', async () => {\n  localStorage.removeItem('accessToken');\n});\n\n// Future work\nexport const UserForgotPassword = createAsyncThunk('auth/forgotPassword', async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await axios.post(`${backendURL}/api/forgotPassword`, userData, {\n      headers: {\n        'content-type': 'application/json'\n      }\n    });\n    return data;\n  } catch (error) {\n    if (error.response && error.response.message) return rejectWithValue(error.response.message);else return rejectWithValue(error.response);\n  }\n});","map":{"version":3,"names":["createAsyncThunk","axios","backendURL","Cookies","signInAPI","signUpAPI","getUserInfoAPI","updateUserInfoAPI","getUserInfo","_","rejectWithValue","token","get","response","data","err","message","updateUserInfo","userUpdateInfo","userSignIn","userData","set","cookie","expires","role","userDataTemp","validUser","finalData","accessToken","userSignUp","newUser","console","log","error","userSignOut","localStorage","removeItem","UserForgotPassword","post","headers"],"sources":["D:/Furniture-Website/fitness-world/src/redux/api/authApi.ts"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query';\r\nimport axios from 'axios';\r\nimport { backendURL } from 'src/constant/api/backendURL';\r\nimport { IRootState } from '../store';\r\nimport Cookies from 'js-cookie';\r\nimport { IUserData } from './authSlice';\r\nimport { signInAPI, signUpAPI } from 'src/constant/api/authentication';\r\nimport { getUserInfoAPI, updateUserInfoAPI } from 'src/constant/api/userAPI';\r\n\r\ninterface IUserDataSignIn {\r\n    validUser: IUserData;\r\n    accessToken: string;\r\n    role: string;\r\n}\r\n\r\ninterface IUserDataSignUp {\r\n    newUser: IUserData;\r\n    accessToken: string;\r\n    role: string;\r\n}\r\n\r\nexport interface IUserUpdateInfo extends Omit<IUserData, 'password'> {}\r\n\r\nexport const getUserInfo = createAsyncThunk('auth/getUserInfo', async (_, { rejectWithValue }) => {\r\n    try {\r\n        const token = Cookies.get('accessToken');\r\n        const response = await getUserInfoAPI(token);\r\n\r\n        return response.data;\r\n    } catch (err: any) {\r\n        return rejectWithValue(err.message);\r\n    }\r\n});\r\n\r\nexport const updateUserInfo = createAsyncThunk(\r\n    'auth/updateUserInfo',\r\n    async (userUpdateInfo: IUserUpdateInfo, { rejectWithValue }) => {\r\n        try {\r\n            const token = Cookies.get('accessToken');\r\n            const response = await updateUserInfoAPI(token, userUpdateInfo);\r\n            return response;\r\n        } catch (err) {\r\n            return rejectWithValue(err);\r\n        }\r\n    },\r\n);\r\n\r\nexport const userSignIn = createAsyncThunk('auth/signin', async (userData: IUserData, { rejectWithValue }) => {\r\n    try {\r\n        const { data } = await signInAPI(userData);\r\n\r\n        Cookies.set('accessToken', data.cookie, { expires: 7 });\r\n\r\n        const { role, ...userDataTemp } = data.validUser;\r\n\r\n        const finalData: IUserDataSignIn = {\r\n            role: data.validUser.role,\r\n            validUser: userDataTemp,\r\n            accessToken: data.cookie,\r\n        };\r\n        return finalData;\r\n    } catch (err: any) {\r\n        if (err.response && err.response.message) {\r\n            return rejectWithValue(err.response.message);\r\n        } else {\r\n            return rejectWithValue(err.message);\r\n        }\r\n    }\r\n});\r\n\r\nexport const userSignUp = createAsyncThunk('auth/signup', async (userData: IUserData, { rejectWithValue }) => {\r\n    try {\r\n        const { data } = await signUpAPI(userData);\r\n\r\n        Cookies.set('accessToken', data.cookie, { expires: 7 });\r\n\r\n        const { role, ...userDataTemp } = data.newUser;\r\n\r\n        const finalData: IUserDataSignUp = {\r\n            role: data.newUser.role,\r\n            newUser: userDataTemp,\r\n            accessToken: data.cookie,\r\n        };\r\n\r\n        console.log(finalData);\r\n        return finalData;\r\n    } catch (error: any) {\r\n        if (error.response && error.response.message) return rejectWithValue(error.response.message);\r\n        else return rejectWithValue(error.response);\r\n    }\r\n});\r\n\r\nexport const userSignOut = createAsyncThunk('auth/signout', async () => {\r\n    localStorage.removeItem('accessToken');\r\n});\r\n\r\n// Future work\r\nexport const UserForgotPassword = createAsyncThunk(\r\n    'auth/forgotPassword',\r\n    async (userData: IUserData, { rejectWithValue }) => {\r\n        try {\r\n            const { data } = await axios.post(`${backendURL}/api/forgotPassword`, userData, {\r\n                headers: {\r\n                    'content-type': 'application/json',\r\n                },\r\n            });\r\n            return data;\r\n        } catch (error: any) {\r\n            if (error.response && error.response.message) return rejectWithValue(error.response.message);\r\n            else return rejectWithValue(error.response);\r\n        }\r\n    },\r\n);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}