{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { getAllUsersAPI } from 'src/constant/api/userAPI';\nimport Cookies from 'js-cookie';\nconst initialState = {\n  userList: [],\n  loading: false,\n  error: null,\n  message: ''\n};\nexport const getAllUsers = createAsyncThunk('user/getAllUsers', async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const adminToken = Cookies.get('accessToken');\n    const {\n      data\n    } = await getAllUsersAPI(adminToken);\n    const usersData = data;\n    for (const user of usersData) {\n      const formattedTime = dateObject => {\n        const hours = dateObject.getHours().toString().padStart(2, '0');\n        const minutes = dateObject.getMinutes().toString().padStart(2, '0');\n        const day = dateObject.getDate().toString().padStart(2, '0');\n        const month = (dateObject.getMonth() + 1).toString().padStart(2, '0'); // Month starts from 0\n        const year = dateObject.getFullYear();\n        return `${hours}:${minutes} - ${day}/${month}/${year}`;\n      };\n      user.createdAt = formattedTime(new Date(user.createdAt));\n      user.updatedAt = formattedTime(new Date(user.updatedAt));\n    }\n    return usersData;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(getAllUsers.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(getAllUsers.fulfilled, (state, {\n      payload\n    }) => {\n      state.loading = false;\n      state.userList = payload;\n    }).addCase(getAllUsers.rejected, (state, {\n      payload\n    }) => {\n      state.loading = false;\n      state.error = payload ? payload : null;\n    });\n  }\n});","map":{"version":3,"names":["createAsyncThunk","createSlice","getAllUsersAPI","Cookies","initialState","userList","loading","error","message","getAllUsers","_","rejectWithValue","adminToken","get","data","usersData","user","formattedTime","dateObject","hours","getHours","toString","padStart","minutes","getMinutes","day","getDate","month","getMonth","year","getFullYear","createdAt","Date","updatedAt","err","userSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","payload","rejected"],"sources":["D:/FurniScape/furniture-world/src/redux/user/userSlice.ts"],"sourcesContent":["import { message } from 'antd';\r\nimport { IUserData } from '../api/authSlice';\r\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport { getAllUsersAPI } from 'src/constant/api/userAPI';\r\nimport Cookies from 'js-cookie';\r\n\r\nexport interface IUserFullData extends Omit<IUserData, 'password'> {\r\n    profileImg_dir: any;\r\n    createdAt: string;\r\n    updatedAt: string;\r\n    role: string\r\n}\r\n\r\nexport interface IUserList {\r\n    userList: IUserFullData[];\r\n    loading: boolean;\r\n    error: Object | null;\r\n    message: string;\r\n}\r\n\r\nconst initialState: IUserList = {\r\n    userList: [],\r\n    loading: false,\r\n    error: null,\r\n    message: '',\r\n};\r\n\r\nexport const getAllUsers = createAsyncThunk('user/getAllUsers', async (_, { rejectWithValue }) => {\r\n    try {\r\n        const adminToken = Cookies.get('accessToken');\r\n\r\n        const { data } = await getAllUsersAPI(adminToken);\r\n\r\n        const usersData: IUserFullData[] = data;\r\n\r\n        for (const user of usersData) {\r\n            const formattedTime = (dateObject: Date) => {\r\n                const hours = dateObject.getHours().toString().padStart(2, '0');\r\n                const minutes = dateObject.getMinutes().toString().padStart(2, '0');\r\n                const day = dateObject.getDate().toString().padStart(2, '0');\r\n                const month = (dateObject.getMonth() + 1).toString().padStart(2, '0'); // Month starts from 0\r\n                const year = dateObject.getFullYear();\r\n\r\n                return `${hours}:${minutes} - ${day}/${month}/${year}`;\r\n            };\r\n\r\n            user.createdAt = formattedTime(new Date(user.createdAt));\r\n            user.updatedAt = formattedTime(new Date(user.updatedAt));\r\n        }\r\n\r\n        return usersData;\r\n    } catch (err: any) {\r\n        return rejectWithValue(err);\r\n    }\r\n});\r\n\r\nexport const userSlice = createSlice({\r\n    name: 'user',\r\n    initialState,\r\n    reducers: {},\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(getAllUsers.pending, (state) => {\r\n                state.loading = true;\r\n                state.error = null;\r\n            })\r\n            .addCase(getAllUsers.fulfilled, (state, { payload }) => {\r\n                state.loading = false;\r\n                state.userList = payload;\r\n            })\r\n            .addCase(getAllUsers.rejected, (state, { payload }) => {\r\n                state.loading = false;\r\n                state.error = payload ? payload : null;\r\n            });\r\n    },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}